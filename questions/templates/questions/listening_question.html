{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-body">
            <h2 class="card-title">問題 {{ question.id }}</h2>
            <div class="text-center mb-4">
                <img src="{{ question.image.url }}" class="img-fluid" alt="Question Image">
            </div>
            <div class="text-center mb-4">
                <audio controls>
                    <source src="{{ question.audio.url }}" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </div>
            <p class="card-text">{{ question.question_text }}</p>
            
            {% if user.is_authenticated %}
                <form method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="answer">あなたの答え:</label>
                        <input type="text" class="form-control" id="answer" name="answer" required>
                    </div>
                    <button type="submit" class="btn btn-primary mt-3">回答を送信</button>
                </form>
            {% else %}
                <p class="text-muted">回答するにはログインしてください。</p>
            {% endif %}

            {% if user_answer %}
                <div class="mt-4">
                    <h4>あなたの回答:</h4>
                    <p>選択した答え: {{ user_answer.selected_answer }}</p>
                    <p>正解: {{ question.correct_answer }}</p>
                    <p>結果: {% if user_answer.is_correct %}正解{% else %}不正解{% endif %}</p>
                </div>
            {% endif %}
        </div>
    </div>
    <div class="mt-4">
        <a href="{% url 'listening_question_list' %}" class="btn btn-secondary">問題一覧に戻る</a>
    </div>
</div>
{% endblock %} 